
{
  "entities": {
    "userProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "photoURL": {
          "type": "string",
          "format": "uri",
          "description": "The URL of the user's profile photo."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The date and time the user profile was created."
        }
      },
      "required": ["displayName", "email", "createdAt"]
    },
    "moodLog": {
        "title": "Mood Log",
        "description": "A log of a user's mood at a specific point in time.",
        "type": "object",
        "properties": {
            "userId": {
                "type": "string"
            },
            "situation": {
                "type": "string"
            },
            "coreEmotion": {
                "type": "string"
            },
            "intensity": {
                "type": "number"
            },
            "thoughts": {
                "type": "string"
            },
            "physicalSensations": {
                "type": "string"
            },
            "timestamp": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["userId", "coreEmotion", "intensity", "timestamp"]
    },
    "journalEntry": {
        "title": "Journal Entry",
        "description": "A user's journal entry.",
        "type": "object",
        "properties": {
            "userId": {
                "type": "string"
            },
            "content": {
                "type": "string"
            },
            "analysis": {
                "type": "string"
            },
            "keyThemes": {
                "type": "array",
                "items": {
                    "type": "string"
                }
            },
            "suggestedToolName": {
                "type": "string"
            },
            "suggestedToolHref": {
                "type": "string"
            },
            "timestamp": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["userId", "content", "timestamp"]
    },
    "gratitudeEntry": {
        "title": "Gratitude Entry",
        "description": "A user's gratitude journal entry.",
        "type": "object",
        "properties": {
            "userId": {
                "type": "string"
            },
            "entries": {
                "type": "array",
                "items": {
                    "type": "string"
                }
            },
            "timestamp": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["userId", "entries", "timestamp"]
    },
    "chatSession": {
      "title": "Chat Session",
      "description": "A single chat session between a user and the AI coach.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "messages": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "role": { "type": "string", "enum": ["user", "assistant", "tool"] },
              "content": { "type": "string" }
            },
            "required": ["role", "content"]
          }
        }
      },
      "required": ["userId", "createdAt", "updatedAt", "messages"]
    },
    "gad7Score": {
        "title": "GAD-7 Score",
        "description": "A user's score on the GAD-7 anxiety assessment.",
        "type": "object",
        "properties": {
            "userId": {
                "type": "string"
            },
            "score": {
                "type": "number"
            },
            "answers": {
                "type": "object"
            },
            "timestamp": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["userId", "score", "answers", "timestamp"]
    },
    "phq9Score": {
        "title": "PHQ-9 Score",
        "description": "A user's score on the PHQ-9 depression assessment.",
        "type": "object",
        "properties": {
            "userId": {
                "type": "string"
            },
            "score": {
                "type": "number"
            },
            "answers": {
                "type": "object"
            },
            "timestamp": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["userId", "score", "answers", "timestamp"]
    },
    "iptSession": {
      "title": "IPT Session",
      "description": "A log of an Interpersonal Therapy exercise.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "timestamp"]
    },
    "schema": {
      "title": "Schema",
      "description": "A user's identified schema.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "timestamp"]
    },
    "sfbtMiracleQuestion": {
      "title": "SFBT Miracle Question",
      "description": "A user's response to the SFBT Miracle Question.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "answer": { "type": "string"},
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "answer", "timestamp"]
    },
    "narrativeStory": {
      "title": "Narrative Story",
      "description": "A user's re-authored story in Narrative Therapy.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "timestamp"]
    },
    "socialSkillAssessment": {
      "title": "Social Skill Assessment",
      "description": "A user's score on the social skills assessment.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "scores": {
          "type": "object",
          "properties": {
            "Listening": { "type": "number" },
            "Small Talk": { "type": "number" },
            "Empathy": { "type": "number" },
            "Nonverbal": { "type": "number" },
            "Assertiveness": { "type": "number" }
          }
        },
        "answers": {
            "type": "object"
        }
      },
      "required": ["userId", "timestamp", "scores", "answers"]
    },
    "worryLog": {
      "title": "Worry Log",
      "description": "A log of a user's worry, a scheduled time to address it, and its outcome.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "worry": { "type": "string" },
        "scheduledTime": { "type": "string", "format": "date-time" },
        "outcome": { "type": "string" },
        "didComeTrue": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "worry", "scheduledTime", "createdAt"]
    },
    "behavioralActivationActivity": {
      "title": "Behavioral Activation Activity",
      "description": "A scheduled activity for Behavioral Activation.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "title": { "type": "string" },
        "scheduledDate": { "type": "string", "format": "date-time" },
        "completed": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "title", "scheduledDate", "completed", "createdAt"]
    },
    "behavioralExperiment": {
      "title": "Behavioral Experiment",
      "description": "A record of a CBT behavioral experiment.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "belief": { "type": "string" },
        "prediction": { "type": "string" },
        "experiment": { "type": "string" },
        "outcome": { "type": "string" },
        "whatILearned": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "belief", "prediction", "experiment", "createdAt"]
    },
    "problemSolvingSession": {
      "title": "Problem Solving Session",
      "description": "A record of a CBT problem-solving exercise.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "problem": { "type": "string" },
        "solutions": { 
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "solution": { "type": "string" },
              "pros": { "type": "string" },
              "cons": { "type": "string" }
            }
          }
        },
        "chosenSolution": { "type": "string" },
        "actionPlan": { "type": "string" },
        "outcome": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "problem", "createdAt"]
    },
    "behavioralChainAnalysis": {
      "title": "Behavioral Chain Analysis",
      "description": "A record of a DBT behavioral chain analysis.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "problemBehavior": { "type": "string" },
        "promptingEvent": { "type": "string" },
        "vulnerabilityFactors": { "type": "string" },
        "chainOfEvents": { "type": "string" },
        "consequences": { "type": "string" },
        "solutions": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "problemBehavior", "promptingEvent", "vulnerabilityFactors", "chainOfEvents", "consequences", "solutions", "createdAt"]
    },
    "exposureHierarchy": {
      "title": "Exposure Hierarchy",
      "description": "A user's fear ladder for exposure therapy.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "fear": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "step": { "type": "string" },
              "suds": { "type": "number" }
            },
            "required": ["step", "suds"]
          }
        }
      },
      "required": ["userId", "fear", "createdAt", "steps"]
    }
  },
  "auth": {
    "providers": ["google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/userProfile"
      },
      "description": "Stores public information about a user."
    },
    "/users/{userId}/moodLogs/{moodLogId}": {
        "schema": {
            "$ref": "#/entities/moodLog"
        },
        "description": "Stores a user's mood logs."
    },
    "/users/{userId}/journalEntries/{journalEntryId}": {
        "schema": {
            "$ref": "#/entities/journalEntry"
        },
        "description": "Stores a user's journal entries."
    },
    "/users/{userId}/gratitudeEntries/{gratitudeEntryId}": {
        "schema": {
            "$ref": "#/entities/gratitudeEntry"
        },
        "description": "Stores a user's gratitude journal entries."
    },
    "/users/{userId}/chats/{chatId}": {
        "schema": {
            "$ref": "#/entities/chatSession"
        },
        "description": "Stores the history of a chat session."
    },
    "/users/{userId}/gad7Scores/{gad7ScoreId}": {
        "schema": {
            "$ref": "#/entities/gad7Score"
        },
        "description": "Stores a user's GAD-7 assessment scores."
    },
    "/users/{userId}/phq9Scores/{phq9ScoreId}": {
        "schema": {
            "$ref": "#/entities/phq9Score"
        },
        "description": "Stores a user's PHQ-9 assessment scores."
    },
    "/users/{userId}/iptSessions/{iptSessionId}": {
      "schema": { "$ref": "#/entities/iptSession" },
      "description": "Stores a user's Interpersonal Therapy sessions."
    },
    "/users/{userId}/schemas/{schemaId}": {
      "schema": { "$ref": "#/entities/schema" },
      "description": "Stores a user's identified schemas."
    },
    "/users/{userId}/sfbtMiracleQuestions/{sfbtMiracleQuestionId}": {
      "schema": { "$ref": "#/entities/sfbtMiracleQuestion" },
      "description": "Stores a user's Solution-Focused Brief Therapy miracle question responses."
    },
    "/users/{userId}/narrativeStories/{narrativeStoryId}": {
      "schema": { "$ref": "#/entities/narrativeStory" },
      "description": "Stores a user's re-authored stories from Narrative Therapy."
    },
    "/users/{userId}/socialSkillAssessments/{assessmentId}": {
        "schema": { "$ref": "#/entities/socialSkillAssessment" },
        "description": "Stores a user's social skill assessment results."
    },
    "/users/{userId}/worryLogs/{worryLogId}": {
      "schema": { "$ref": "#/entities/worryLog" },
      "description": "Stores a user's worry log entries."
    },
    "/users/{userId}/behavioralActivation/{activityId}": {
      "schema": { "$ref": "#/entities/behavioralActivationActivity" },
      "description": "Stores a user's scheduled activities for Behavioral Activation."
    },
    "/users/{userId}/behavioralExperiments/{experimentId}": {
        "schema": { "$ref": "#/entities/behavioralExperiment" },
        "description": "Stores a user's CBT behavioral experiments."
    },
    "/users/{userId}/problemSolving/{sessionId}": {
        "schema": { "$ref": "#/entities/problemSolvingSession" },
        "description": "Stores a user's CBT problem-solving sessions."
    },
    "/users/{userId}/behavioralChainAnalyses/{analysisId}": {
        "schema": { "$ref": "#/entities/behavioralChainAnalysis" },
        "description": "Stores a user's DBT behavioral chain analyses."
    },
    "/users/{userId}/exposureHierarchies/{hierarchyId}": {
      "schema": { "$ref": "#/entities/exposureHierarchy" },
      "description": "Stores a user's exposure therapy fear ladders."
    }
  }
}
